name: Nuget publish

on:
  push:
    # branches:
    #   - master
  release:
    types: [published, created, edited]
    # branches:
    #   - master

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout the repository
        uses: actions/checkout@v1

    - name: Build All
      uses: ./.github/actions/build-all

    - name: Push package to NuGet
      run: dotnet nuget push output/**/*.nupkg --api-key ${{ secrets.NUGET_API_KEY }} --source https://api.nuget.org/v3/index.json
