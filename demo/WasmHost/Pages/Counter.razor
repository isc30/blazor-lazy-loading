@page "/counter"

@*<div class="pureCenter full light fadein">
    <div class="loader"></div>
</div>*@

<h1>Counter</h1>
<p>Current count: @currentCount</p>
<button class="btn btn-primary" @onclick="IncrementCount">Click me</button>

<Lazy Name="SimpleComponent" OnBeforeLoadAsync="Delay(500, 2500)">
    <Loading>
        <LazyPlaceholder />
    </Loading>
    <Error>
        <h2>Component loading errored...</h2>
    </Error>
</Lazy>

<Lazy Name="NamedComponent" Required="true" OnBeforeLoadAsync="Delay(500, 2500)">
    <Loading>
        <LazyPlaceholder />
    </Loading>
</Lazy>

@code {
    private int currentCount = 0;

    private void IncrementCount()
    {
        currentCount++;
    }

    private Func<Lazy, Task> Delay(int minMs, int maxMs)
    {
        return (Lazy c) => Task.Delay(new Random().Next(minMs, maxMs));
    }
}
